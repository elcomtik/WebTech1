<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Hra čísla</title>
	</head>
	<body>

		<h3>Návod na ovládanie:</h3>
		<ol>
			<li>Rozhodnite, či číslo je árne alebo nepárne</li>
			<li>Potiahnite "kocku" do príslušného vedierka</li>
			<li>Bodové ohodnotenie:
				<ul>
					<li>Za správne umiestnenie dostanete +1b</li>
					<li>Za nesprávne umiestnenie vám budú odpočítané 2b</li>
				</ul>
			</li>
		</ol>

		<section>
		<div>
			<canvas id="canvas" width="800" height="500">
			This text is displayed if your browser does not support HTML5 Canvas.
			</canvas>
		</div>

		<script type="text/javascript">

			var canvas;
			var ctx;
			var x = 400;
			var y = 460;
			var WIDTH = 800;
			var HEIGHT = 500;
			var dragok = false;
			var pocetbodov = 0;
			var cislo = Math.floor(Math.random() * 20) + 1;

			function rect(x,y,w,h) {
			 ctx.beginPath();
			 ctx.rect(x,y,w,h);
			 ctx.closePath();
			 ctx.fill();
			}

			function clear()
			{
				ctx.clearRect(0, 0, WIDTH, HEIGHT);
			}

			function init()
			{
				canvas = document.getElementById("canvas");
				ctx = canvas.getContext("2d");
				return setInterval(draw, 10);
			}

			function draw()
			{
				clear();
				ctx.fillStyle = "#111111";
				rect(0,0,WIDTH,HEIGHT);

				ctx.fillStyle = "#777777";
				rect(20, 50, 100, 100);

				ctx.font = "20px Verdana";
				ctx.fillStyle = "#000000";
				ctx.fillText("párne", 38, 110);
				
				ctx.fillStyle = "#777777";
				rect(680, 50, 100, 100);

				ctx.fillStyle = "#000000";
				ctx.fillText("nepárne", 690, 110);

				
				ctx.fillStyle = "#FFFFFF";
				
				ctx.font = "30px Verdana";
				ctx.fillText(cislo, 390, 240);

				rect(x - 15, y - 15, 30, 30);
			}

			function myMove(e)
			{
				//console.log(x);
				//console.log(y);
				if (dragok)
				{
					x = e.pageX - canvas.offsetLeft;
					y = e.pageY - canvas.offsetTop;
				}
			}

			function myDown(e)
			{
				if (e.pageX < x + 15 + canvas.offsetLeft && e.pageX > x - 15 +
				canvas.offsetLeft && e.pageY < y + 15 + canvas.offsetTop &&
				e.pageY > y -15 + canvas.offsetTop)
				{
					x = e.pageX - canvas.offsetLeft;
					y = e.pageY - canvas.offsetTop;
					dragok = true;
					canvas.onmousemove = myMove;
				}


			}

			function myUp()
			{
				dragok = false;
				canvas.onmousemove = null;
				if (x>20 && x<120 && y>50 && y<150) //lave vedierko
				{
					if (cislo%2==0){
						pocetbodov++;
						console.log(pocetbodov);
						document.getElementById("points").innerHTML=pocetbodov;
						x=400-15;
						y=460-15;
						cislo = Math.floor(Math.random() * 20) + 1  
					}
					else
					{
						pocetbodov-=2;
						if (pocetbodov<0)
						{
							alert("Koniec hry !!");
							pocetbodov=0;
						}
						document.getElementById("points").innerHTML=pocetbodov;
						x=400-15;
						y=460-15;
					}
				}
				if (x>680 && x<780 && y>50 && y<150 ) //prave vedierko
				{
					if (cislo%2==1){
						pocetbodov++;
						console.log(pocetbodov);
						document.getElementById("points").innerHTML=pocetbodov;
						x=400-15;
						y=460-15;
						cislo = Math.floor(Math.random() * 20) + 1  
					}
					else
					{
						pocetbodov-=2;
						if (pocetbodov<0)
						{
							alert("Koniec hry !!");
							pocetbodov=0;
						}
						document.getElementById("points").innerHTML=pocetbodov;
						x=400-15;
						y=460-15;
					}
				}
			}

			init();
			canvas.onmousedown = myDown;
			canvas.onmouseup = myUp;

		</script>
		</section>
		<p>Aktuálny počet bodov: <div id="points">0</div></p>
	</body>
</html>