<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Canvas Drag and Drop Test</title>
	</head>
	<body>
		<section>
		<div>
			<canvas id="canvas" width="800" height="500">
			This text is displayed if your browser does not support HTML5 Canvas.
			</canvas>
		</div>

		<script type="text/javascript">

			var canvas;
			var ctx;
			var x = 400;
			var y = 460;
			var WIDTH = 800;
			var HEIGHT = 500;
			var dragok = false;
			var pocetbodov = 0;

			function rect(x,y,w,h) {
			 ctx.beginPath();
			 ctx.rect(x,y,w,h);
			 ctx.closePath();
			 ctx.fill();
			}

			function clear()
			{
				ctx.clearRect(0, 0, WIDTH, HEIGHT);
			}

			function init()
			{
				canvas = document.getElementById("canvas");
				ctx = canvas.getContext("2d");
				return setInterval(draw, 10);
			}

			function draw()
			{
				clear();
				ctx.fillStyle = "#111111";
				rect(0,0,WIDTH,HEIGHT);

				ctx.fillStyle = "#444444";
				rect(20, 50, 100, 100);
				ctx.fillStyle = "#777777";
				rect(680, 50, 100, 100);

				ctx.fillStyle = "#FFFFFF";
				rect(x - 15, y - 15, 30, 30);
			}

			function myMove(e)
			{
				//console.log(x);
				//console.log(y);
				if (dragok)
				{
					x = e.pageX - canvas.offsetLeft;
					y = e.pageY - canvas.offsetTop;
				}
			}

			function myDown(e)
			{
				if (e.pageX < x + 15 + canvas.offsetLeft && e.pageX > x - 15 +
				canvas.offsetLeft && e.pageY < y + 15 + canvas.offsetTop &&
				e.pageY > y -15 + canvas.offsetTop)
				{
					x = e.pageX - canvas.offsetLeft;
					y = e.pageY - canvas.offsetTop;
					dragok = true;
					canvas.onmousemove = myMove;
				}


			}

			function myUp()
			{
				dragok = false;
				canvas.onmousemove = null;
				if (x>20 && x<120 && y>50 && y<150)
				{
					pocetbodov++;
					console.log(pocetbodov);
					x=400-15;
					y=460-15;
				}
				if (x>680 && x<780 && y>50 && y<150)
				{
					pocetbodov++;
					console.log(pocetbodov);
					x=400-15;
					y=460-15;
				}

			}

			init();
			canvas.onmousedown = myDown;
			canvas.onmouseup = myUp;

		</script>
		</section>
		<footer class="container-fluid text-center">
		    <p>Webové technológie 2016/2017</p>
		</footer>
	</body>
</html>
